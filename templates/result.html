<!DOCTYPE html>
<html>

<head>
    <title>Image to text converter</title>
    
    {% if msg == "aFile uploaded successfully" %}
    <script>
    window.setTimeout(function(){
        location.reload();
        },7000);
    </script>
    {% endif %}
</head>

<body>
    {% if msg %}
    <p>{{msg}}</p>
    {% endif %}
    <h3>Result:</h3>
    {% if img_src and img_src != "static/uploads/" %}
    <img src="{{ img_src }}">
    {% endif %}

    {% if extracted_text %}
    {% autoescape false %}
    <p>Text extracted from image is <br>
         <b>{{extracted_text}}</b></p>
    {% endautoescape %}
    {% else %}
    <p>Extracted text will appear here</p>
    {% endif %}

    <form method="POST"><input type="submit" value="Get all images" name="getimgs"></form>
    {% for word,url in words %}
        <form method="GET" > <input type="text" value="{{word}}" name="word"> <input type="submit" value="Search for image"></form>
        {% if url %}
            <img src="{{url}}">
        {% endif %}
    {% endfor %}
    
    <br><br>
    <form method="POST"><input type="submit" value="Get Ingredients and Steps" name="ingsteps"></form>
    {% if sentences != [] %}
    <h3>Ingredients:</h3>
    <table border="True">
        <tr>
            <td>Name</td>
            <td>Unit</td>
            <td>Quantity</td>
        </tr>
        {% for sentence in sentences %}
            {% if sentence[0] == "ingredients" %}
            <tr>
                <td>{{sentence[1]["name"]}}</td>
                <td>{{sentence[1]["unit"]}}</td>
                <td>{{sentence[1]["quantity"]}}</td>
            </tr>
            {% endif %}
        {% endfor %}
    </table>
    <h3>Steps:</h3>
    <ol>
    {% for sentence in sentences %}
        {% if sentence[0] == "steps" %}
            <li>{{sentence[2]}}</li>
        {% endif %}
    {% endfor %}
    </ol>
    {% endif %}
    <script type="text/javascript">document.addEventListener("DOMContentLoaded",function(){window.addEventListener("pagehide",function(a){window.name+="\ue000"+window.pageXOffset+"\ue000"+window.pageYOffset});if(window.name&&-1<window.name.indexOf("\ue000")){var a=window.name.split("\ue000");3<=a.length&&(window.name=a[0],window.scrollTo(parseFloat(a[a.length-2]),parseFloat(a[a.length-1])))}});
    </script>
</body>

</html>