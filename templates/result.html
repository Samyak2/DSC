<!DOCTYPE html>
<html>

<head>
    <title>Image to text converter</title>
    
    {% if msg == "aFile uploaded successfully" %}
    <script>
    window.setTimeout(function(){
        location.reload();
        },7000);
    </script>
    {% endif %}
</head>

<body>
    <form action="/" method="GET">
    <input type="submit" value="Reset">
    </form>
    {% if msg %}
    <p>{{msg}}</p>
    {% endif %}
    <h3>Result:</h3>
    {% if img_src and img_src != "static/uploads/" %}
    <img src="{{ img_src }}">
    {% endif %}

    {% if extracted_text %}
    {% autoescape false %}
    <p>Text extracted from image is <br>
         <b>{{extracted_text}}</b></p>
    {% endautoescape %}
    {% else %}
    <p>Extracted text will appear here</p>
    {% endif %}

    <form method="POST"><input type="submit" value="Get all images" name="getimgs"></form>
    {% for word,url in words %}
        <p>{{word}}</p>
        {% if url %}
            <img src="{{url}}">
        {% endif %}
    {% endfor %}
    
    <br><br>
    <form method="POST"><input type="submit" value="Get Ingredients and Steps" name="ingsteps"></form>
    {% if sentences != [] %}
    <h3>Ingredients:</h3>
    <table border="True">
        <tr>
            <td>Name</td>
            <td>Unit</td>
            <td>Quantity</td>
        </tr>
        {% for sentence in sentences %}
            {% if sentence[0] == "ingredients" %}
            <tr>
                <td>{{sentence[1]["name"]}}</td>
                <td>{{sentence[1]["unit"]}}</td>
                <td>{{sentence[1]["quantity"]}}</td>
            </tr>
            {% endif %}
        {% endfor %}
    </table>
    <h3>Steps:</h3>
    <ol>
    {% for sentence in sentences %}
        {% if sentence[0] == "steps" %}
            <li>{{sentence[2]}}</li>
        {% endif %}
    {% endfor %}
    </ol>
    {% endif %}
    <br><br>
    <form method="POST"><input type="submit" value="Get Videos" name="getvideos"></form>
    {% if video_urls %}
        {% for video_url in video_urls %}
            <iframe src={{video_url}}>
            </iframe>
        {% endfor %}
    {% endif %}
    
    <br><br>
    <form method="POST"><input type="submit" value="Get GIFs" name="getgifs" style="width: 20%; height: 20%;"></form>
    {% if gif_urls %}
        {% for gif_url in gif_urls %}
            <img src={{gif_url}}>
            </img>
        {% endfor %}
    {% endif %}
</body>

</html>